# 响应系统的作用与实现
+ `数据`  
+ `副作用函数`     
  + （在vue中这个副作用函数就是组件的render函数，render函数回使用数据，产生引用关系）

副作用函数调用，读取数据；
数据改变，调用副作用函数，更新数据结果；

1. 数据获取
2. 数据设置

## **响应式系统的实现**：
建立 `数据` 与 `副作用函数` 的联系
1. 在读取数据的时候，将副作用函数收集存储起来
2. 在设置数据，数据发生变化的时候，将副作用函数取出执行


### 基础版响应系统
1. proxy代理数据（对象），get某个属性时，将副作用函数存储
2. set属性时，取出副作用函数，执行

#### 缺陷
1. 副作用函数是硬编码写死的，不够灵活

### 相对完善的响应系统
1. 副作用函数自动、灵活收集
   1. weakMap
   2. Map
   3. Set
2. 分支切换的，清除冗余副作用
3. 嵌套副作用函数
4. 可调度性
5. computed
6. watch
7. 过期的副作用函数，竞态问题


## 问题点？
---
### 为什么解构会导致失去响应性？    
解构赋值，类似于基本的赋值操作；    
基本类型是直接复制值；     
引用类型是复制地址指针；     

在解构中，如果是一个基本值的话，就得到一个值copy；      
访问这个值就跟访问代理之后的值失去联系了；     
没有代理proxy，就没有响应式了。

----